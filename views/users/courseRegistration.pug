extends ../layouts/common

block content
    link(rel="stylesheet", href="/styles/cellHover.css")
    link(rel="stylesheet", href="/styles/myTable.css")
    script.
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    .px-3.pt-3
        h1 Course Registration
        hr(style="background-color: lightgray;")
        if (loginUser)
          h5 Hi #{loginUser.name}, you are now in the course registration page!
        hr
        .container-fluid.pb-5
            .row
                .col-md-3
                    img(src='/images/registration.jpeg' alt='Registration' width='100%' height='auto')
                .col-md-7
                    div
                        .container-fluid
                            .row
                                .col-md-5
                                    label(for='searchByName') Filter by Subject Name:
                                .col-md-7
                                    form.ml-auto(action="/users", method="GET", class="d-flex")
                                        input(type="text", name="q", class="form-control", placeholder="Any", id='searchByName')
                                        button.btn.btn-primary.ml-2(type='submit', data-toggle='tooltip', data-placement='top', title='Search by the input keyword') &#128270;
                    div
                        .container-fluid
                            .row
                                .col-md-5
                                    label() Filter by Department:
                                .col-md-7
                                    if (departments)
                                        .dropdown(style='float: left;')
                                            button#dropdownMenuButton.btn.btn-secondary.dropdown-toggle(type='button',
                                                data-toggle='dropdown', aria-haspopup='true', aria-expanded='false') Department
                                            .dropdown-menu.p-2(aria-labelledby='dropdownMenuButton')
                                                each department in departments
                                                    a.dropdown-item(href='/', data-toggle='tooltip', data-placement='right', title=department.department_name) #{department.department_name}
                .con-md-2

            hr(style="background-color: red;")
            .table-responsive.mt-4(style='background-color: white; border: 3px solid gray; border-radius: 5px;')
                .table-wrapper-scroll-y.my-custom-scrollbar
                    table.table.table-hover.table-striped
                        tr.table-secondary.blue
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Department ID') Department ID
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Department Name') Department Name
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Subject ID') Subject ID
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Subject Name') Subject Name
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Lecture Name') Lecture Name
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Subject Type') Type
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Room') Room
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Dat') Day
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Period') Period
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Credits') Credits
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='Start') Start Day
                           th(style='text-align:center;', data-toggle='tooltip', data-placement='top', title='End') End Day
                        if (subjects && correspondingDepartmentOfSubject)
                          - var count = 0
                          each subject in subjects
                              tr
                                  td= correspondingDepartmentOfSubject[count]['department_id']
                                  td= correspondingDepartmentOfSubject[count++]['department_name']
                                  td= subject.id_sub
                                  td= subject.name_sub
                                  td= subject.lecturer ? subject.lecturer : 'Updating...'
                                  td= subject.type
                                  td= subject.room ? subject.room : 'Updating...'
                                  td= subject.whichDay ? subject.whichDay.charAt(0).toUpperCase() + subject.whichDay.slice(1) : 'Updating...'
                                  td= subject.whichPeriod ? subject.whichPeriod : 'Updating...'
                                  td= subject.credits
                                  td= subject.start
                                  td= subject.end


